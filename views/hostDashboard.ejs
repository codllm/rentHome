<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Listing management · AirbnbLite</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-white min-h-screen font-sans antialiased text-[#222222]">

  <%- include('partials/navbar') %>

    <div class="max-w-[1200px] mx-auto px-6 py-12">

      <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-12">
        <div>
          <h1 class="text-3xl font-semibold tracking-tight">Your Listings</h1>
          <p class="text-gray-500 mt-1">Manage your properties and hosting settings.</p>
        </div>

        <a href="/host/add"
          class="inline-flex items-center justify-center bg-black text-white px-6 py-3 rounded-xl font-semibold hover:bg-gray-800 transition shadow-sm active:scale-95">
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
          </svg>
          Add New Home
        </a>
      </div>

      <% if (homes.length===0) { %>
        <div
          class="flex flex-col items-center justify-center py-24 border-2 border-dashed border-gray-200 rounded-3xl bg-gray-50">
          <div class="bg-gray-200 p-4 rounded-full mb-4">
            <svg class="w-10 h-10 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
              </path>
            </svg>
          </div>
          <h3 class="text-xl font-semibold">No listings yet</h3>
          <p class="text-gray-500 mt-1 mb-6">Start earning by sharing your space.</p>
          <a href="/host/add" class="text-black font-semibold underline underline-offset-4 hover:text-gray-600">Create a
            listing</a>
        </div>
        <% } %>

          <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8">

            <% for (let home of homes) { %>

              <div
                class="group border border-gray-200 rounded-2xl overflow-hidden hover:shadow-xl transition-shadow duration-300">

                <div class="relative h-52 overflow-hidden">
                  <img src="<%= home.image_url %>"
                    class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                    alt="<%= home.title %>">
                  <div class="absolute top-3 left-3">
                    <span
                      class="bg-white/95 backdrop-blur shadow-sm px-3 py-1 rounded-full text-[11px] font-bold uppercase tracking-wider flex items-center gap-1.5">
                      <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                      Listed
                    </span>
                  </div>
                </div>

                <div class="p-6">
                  <div class="flex justify-between items-start mb-4">
                    <div>
                      <h3 class="text-lg font-semibold text-gray-900 truncate max-w-[200px]">
                        <%= home.title %>
                      </h3>
                      <p class="text-gray-500 text-sm">
                        <%= home.location %>
                      </p>
                    </div>
                    <p class="text-right">
                      <span class="block font-bold">₹<%= home.price %></span>
                      <span class="text-xs text-gray-400">/ night</span>
                    </p>
                  </div>

                  <div class="flex items-center gap-3 mt-6 border-t pt-5">
                    <a href="/homes/<%= home.id %>"
                      class="flex-1 text-center py-2.5 rounded-lg border border-gray-300 font-semibold text-sm hover:bg-gray-50 transition">
                      View Listing
                    </a>

                    <form method="post" 
                    action="/host/delete-home/<%= home.id %>" 
                    class="flex-1"
                    onsubmit="return confirm('Are you sure you want to remove this listing?');">
                <button type="submit" 
                        class="w-full py-2.5 px-4 rounded-xl font-semibold text-sm text-red-600 bg-red-50 border border-red-100 hover:bg-red-600 hover:text-white transition-all duration-200 active:scale-95">
                  Delete Listing
                </button>
              </form>
              

                  </div>
                </div>

              </div>

              <% } %>

          </div>
    </div>

</body>

</html>